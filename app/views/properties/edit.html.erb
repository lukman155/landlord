<h1>Editing property</h1>

<%= form_with model: @property, class: 'form' do |property_form| %>
  <div class="form-group">
    <%= property_form.label :property_name %>
    <%= property_form.text_field :property_name, class: 'form-control' %>
  </div>

  <div class="form-group">
    <%= property_form.label :address %>
    <%= property_form.text_field :address, class: 'form-control' %>
  </div>

  <div class="form-group">
    <%= property_form.label :rent_amount %>
    <%= property_form.text_field :rent_amount, class: 'form-control' %>
  </div>

  <div class="form-group">
    <%= property_form.label :property_type %>
    <%= property_form.text_field :property_type, class: 'form-control' %>
  </div>

  <div class="form-group">
    <%= property_form.label :description %>
    <%= property_form.text_area :description, class: 'form-control' %>
  </div>

  <div class="form-group">
    <%= property_form.label :images, 'Images (multiple)', style: "display: block" %>
    <%= property_form.file_field :images, multiple: true, class: 'form-control-file' %>
    <% if @property.images.attached? %>
      <div class="mt-2">
        <h5>Current Images:</h5>
        <div class="row">
          <% @property.images.each do |image| %>
            <div class="col-md-3">
              <%= image_tag image.variant(resize_to_limit: [300, 300]) %>
              <%= link_to 'Remove', image, method: :delete, data: { confirm: 'Are you sure you want to delete this image?' }, class: 'btn btn-danger btn-sm mt-1' %>
            </div>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>

  <div class="form-actions">
    <%= property_form.submit 'Save Changes', class: 'btn btn-primary' %>
  </div>
<% end %>

<br>

<div>
  <%= link_to "Show this property", @property, class: 'btn btn-secondary' %> |
  <%= link_to "Back to properties", properties_path, class: 'btn btn-secondary' %>
</div>
